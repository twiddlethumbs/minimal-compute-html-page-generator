<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width">
  <meta charset="UTF-8">
  <title>Minimal Compute Page Generator</title>
  
  <link rel="stylesheet" href="./css/bootstrap.min.css">

<script src="js/top-menu.js"></script>
<script src="js/footer-menu.js"></script>


<link rel="stylesheet" href="css/motif.css">
<link rel="stylesheet" href="css/navbar.css">


	
	
	
  <script src="./tinymce/js/tinymce/tinymce.min.js" referrerpolicy="origin"></script>
  <script>
  /*
  Prototypes of portions of this code were generated by prompts in ChatGPT
	- initial saving to a file (through a download)
    - other as yet unused portions that may be used for header and footer navigation in the future
  
  TESTING - features I would like to add
  
  - way to save progress? - may not be possible on a local file - might try writing out a .js file with the info as vars?
  - test pulling existing text and html into the tinymce section - will not work with a local file but may work on a server
  - use url paramaters with regex to pull data from the inside of an existing html Page - same as above (is a requirement for above)
  - add header and footer includes to the output file - will not work without a server but may be able to add in a silent way?
  - add schema.org markup fields for a "creative work" or "article"? - found "thesis" that may be closer but need to verify
		https://schema.org/CreativeWork
  - add a check box to include online versions of jquery and Bootstrap
  
  look into these functions of TinyMCE as a features
  - https://www.tiny.cloud/docs/tinymce/6/importcss/
  - https://www.tiny.cloud/docs/tinymce/6/template/
  
  */
  
  
    tinymce.init({
      selector: '#mytextarea',
	  browser_spellcheck: true,
      plugins: 'visualblocks advlist autolink lists link image media autoresize charmap preview anchor code insertdatetime table searchreplace visualchars wordcount',
	  min_height: 600, 
      toolbar: 'undo redo | searchreplace | formatselect | bold italic backcolor | table | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | insertdatetime | visualblocks removeformat | link image media | code'
    });
  </script>
  
  <style>
  .tox-promotion {
  display:none;
  }
  .input-group {
  margin-top:8px;
  }
  </style>
</head>
<body onload='topnav(); footernav();'>

<div id='topnav'></div>

<div class='content'>
	
<div class='container' style="margin-top:24px;">
<div class='row'>
<div class="input-group col-md-6">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-default">Page Title</span>
  </div>
  <input type="text" id="title_input" class="form-control" aria-label="Page Title" aria-describedby="inputGroup-sizing-default">
</div>

<div class="input-group col-md-6">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-default">Article Author</span>
  </div>
  <input type="text" id="author_input" class="form-control" aria-label="Article Author" aria-describedby="inputGroup-sizing-default">
</div>

<div class="input-group col-md-6">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-default">Department/Topic</span>
  </div>
  <input type="text" id="support_of_input" value='Digital Humanities' class="form-control" aria-label="Department/Topic" aria-describedby="inputGroup-sizing-default">
</div>

<div class="input-group col-md-6">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-default">Organization</span>
  </div>
  <input type="text" id="organization_input" value='University of Nebraska - Lincoln' class="form-control" aria-label="Organization" aria-describedby="inputGroup-sizing-default">
</div>

</div>
</div>

<!-- TinyMCE section -->
  <form method="post" style="margin-top:20px;">
    <textarea id="mytextarea" name="mytextarea" style="width:100%; min-height:400px;"></textarea>
  </form>

<div style="width:100%">  
  <button id="download-btn" type="button" class="btn btn-success" style="margin:32px; float:right;">Download HTML</button>
</div>

<div style="clear:both; width:-webkit-fill-available; padding:12px; margin:32px; color: #383d41; background-color: #e2e3e5; border-color: #d6d8db; border: 1px solid; border-radius: .25rem;">
<h2 style="font-size:1.7rem">Useful links and resources</h2>
<p>
WYSIWYG editor library <a href='https://www.tiny.cloud/' target="_blank">TinyMCE</a>
<br>
Grid layout css <a href="https://getbootstrap.com/" target="_blank">Bootstrap</a>
<br>
Tutorials and example code <a href="https://www.w3schools.com/" target="_blank">W3schools</a>
<br>
Search engine schema <a href="https://schema.org/Thesis" target="_blank">Schema.org</a>
<span style="padding-left: 40px;">For Creative Work type Thesis <a href="https://schema.org/Thesis" target="_blank">https://schema.org/Thesis</a></span>
<span style="padding-left: 40px;">Validator <a href="https://validator.schema.org/" target="_blank">https://validator.schema.org/</a></span>
</p>
</div>


  <script>
 // use this as an example for including header and footer navigation
 //   https://www.w3schools.com/howto/tryit.asp?filename=tryhow_html_include_1

    document.getElementById('download-btn').addEventListener('click', () => {
	
	var title_value = document.getElementById('title_input').value;
	//  add a string replace for spaces to hyphens
	var filename =  title_value + '.html';
	filename = filename.replaceAll(" ", "-");
	
	var author_value = document.getElementById('author_input').value;
	
	var support_of_value = document.getElementById('support_of_input').value;
	
	var organization_value = document.getElementById('organization_input').value;
	
/*
CREATIVE WORK SCHEMA - https://schema.org/CreativeWork
	
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CreativeWork",
  "author": "Sony",
  "contentRating": "Mature",
  "image": "videogame.jpg",
  "name": "Resistance 3: Fall of Man"
}
/script>


WEBPAGE SCHEMA - https://schema.org/WebPage

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Lecture 12: Graphs, networks, incidence matrices",
    "description": "These video lectures of Professor Gilbert Strang teaching 18.06 were recorded in Fall 1999 and do not correspond precisely to the current  edition of the textbook.",
    "publisher": {
        "@type": "CollegeOrUniversity",
        "name": "MIT OpenCourseWare"
    },
    "license": "http://creativecommons.org/licenses/by-nc-sa/3.0/us/deed.en_US"
}
/script>


https://schema.org/Thesis

<script type="application/ld+json">
{
  "@context": {
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfa": "http://www.w3.org/ns/rdfa#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "schema": "https://schema.org/",
    "xsd": "http://www.w3.org/2001/XMLSchema#"
  },
  "@id": "",
  "rdfa:usesVocabulary": {
    "@id": "schema:"
  },
  "@type": "schema:Thesis",
  "schema:author": "Sekar, Nitin, Ph.D.",
  "schema:inSupportOf": "Conservation Biology",
  "schema:name": "Asian elephants are essential as seed dispersers in a disturbed tropical forest",
  "schema:sourceOrganization": "Princeton University"
}
/script>

*/

	var schema_output = '<script type="application/ld+json"> '
+ '{ '
+ '  "@context": { '
+ '    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#", '
+ '    "rdfa": "http://www.w3.org/ns/rdfa#", '
+ '    "rdfs": "http://www.w3.org/2000/01/rdf-schema#", '
+ '    "schema": "https://schema.org/", '
+ '    "xsd": "http://www.w3.org/2001/XMLSchema#" '
+ '  }, '
+ '  "@id": "", '
+ '  "rdfa:usesVocabulary": { '
+ '    "@id": "schema:" '
+ '  }, '
+ '  "@type": "schema:Thesis", '
+ '  "schema:author": "' + author_value + '", '
+ '  "schema:inSupportOf": "' + support_of_value + '", '
+ '  "schema:name": "' + title_value + '", '
+ '  "schema:sourceOrganization": "' + organization_value + '" '
+ '} ';
// the end script tag needs added in parts

// end script tags by themeselves cause an issue with the parseing of the script. It must be passed to the new html so I'm breaking the tag into two parts to add it to the pages source
	var end_script_tag1 = '</';
	var end_script_tag2 = 'script> ';
	
	var html_start = "<!DOCTYPE html><html><head><meta charset='UTF-8'><title>" + title_value + "</title>" + schema_output + end_script_tag1 + end_script_tag2 +"</head><body>";
	var html_end = "</body></html>";
	
	var editor = tinymce.get('mytextarea');
	var text = html_start + editor.getContent() + html_end;

// the inputs will need commas and carriage returns removed

// TESTING - remove when done
// alert(text);

      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      element.setAttribute('download', filename);

      element.style.display = 'none';
      document.body.appendChild(element);

      element.click();

      document.body.removeChild(element);

    });
  </script>
</div>

<div id='footernav'></div>
  
  
</body>
</html>
